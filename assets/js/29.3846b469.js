(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{227:function(v,t){v.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwgAAAAzCAYAAAAzUC/kAAAL5UlEQVR4nO3d25WjuhKAYfmsHU07gnkyHYTjMU7HE4QhCE86nIe9iylX68Zd4P9bq9f0tLEQkigQCHHquq5zAAAAAOCc+9/WGQAAAABQDjoIAAAAAHp0EAAAAAD06CAAAAAA6NFBAAAAANCjgwAAAACgRwcBAAAAQI8OAgAAAIAeHQQAAAAAvX+2zgD2pW1b1zTNYulXVeUul8ti6Yu5tuN2u0U/v9/vye8vXaZzSdXNXrYDALA/TdO8HWOqqnJVVc2avqSnfxd1Xc+2rhx2fU3TuLquVzlHcs65U9d1Xe7CcrJjKwkAAADAcpqmKbODcDqdlswLAKBgdV3PchXNXvnjotNyhl5lLb0uUtvz+/dv93q9VszR55CyX/tK+hg5efS1dfneFtvou2MgdzIknwNO2Scb1UGY+7ZOSmpoQ2oYx1CpYSN7cr/f+0a3Zs/zaGT4jJSlBMlUedq2eaS2NRVts3y6jtY8MGEYOTY/Hg93vV43zs14sh11XRMrd4D4sI6tyjn7GYS2bfvfn8/nIpkZi0CShxOw8S6Xi7tcLm8dhJzypG2G3W63vjxpmwAAlINZjA5uzTs9AID1EecBzC27g8AVvn2i3gDg2Ep+ZgDAPnEHAQAAAECP9yBgFvf7fZPx9vLwcO77CPb4TIDkPfbcg34HwR63EcPktnusw74DhHoBlmf3u7Xeo+TLR13XrqqqQ+37ox5S3lpqZpicE6pPsXS9tW3bj3+t6zo5G03btrPWiawzVNff39+7PnDr2QucC8/2I+UgvzOjxPK26BTb9kCMe3e/31cvE1sngrr5DGu3OX3+I/HHnhN9StvTMwvK/7fKh/zs7RwjJnuIUWljHKVh+PIlU1DOnee2bXf3Loil601m9tHTVYbYk/W58+EjedvrQ3zSlvXbHWPLYT11Xc8+xXLOOrXS4vLWloj7MfrKYdM0ruu6PuawP36GtducnPvUdd1fAJT4Lz+f0Dlw7ufxcavtvt1uuz3HiNnlEKPb7eZut5s7nU7eStHTUc7p0wJ+7tV+6TGnysf36vKpUlPuyvSksv6S5JSv5F/ae4i+apGqB31SG7rSJFfH5RbuEa5I5QwDkTqJDdnSn9k2FVpWys+Xbmxd9uqk3BnSd+72LtUepQyc+1veoeX0MqHldJq2TmJ/c+5nXcmxRtebTN9bWrzBv1JX222c0HQ9630wFQfsVf9Qm5OT3Vibez6fb++LeD6fbxfqjnCeEqoDW1f2+Bi6qyvp6TKP1ZFzf89XfDFE6krn65D7e5epruvOOdcN+Mogr9erO5/PnXOuO5/P3fV67X8ej4f3O865rq7raH6v12ufb/m/ptf5er26ruu6x+PRLy/p6zTsj3W9Xt/SlX9DeUylN8XYerPlZsvDJ/a5lEMqPVsm8j1bb3a5FFl+qpxyyBEq31gec9Yb287H4+Gth/P5/JauXUbyej6fg/viWEvGFKG3W2KKrFdvj91u/X9dPr42Ksva8tFp+OrcpqfXo5ez6cp3JGYtZcm4L2lLvPfF4tfr9aOsdTlqv379eitr+bH7TGgf0GnqdejYo78TKnvJs41ZSwq1k72ZK7766OO6jQO6rnznDL586fT0OYtvOd2+c+KAPl/QbVPq18Zl/f0lyi5kqfigyz4Uh33f8X2u8yh1JGmG4q2NM3q/sunlHr+nWPr8O6SYDkLTNJ1zrquqqv9bVVWjT5h8+ZV16L+FdirftuacZMr3mqaJbpssq/+21A4+pt5s2cv/x3YQxuYj9b3cE//SOgi6fH3tMrTuKR2EUN596w4tV0LbnGsdvn01t3xCy/qEOgCpvMTiwVztOWWpuB+Kib5tjv3NGlMnusxtWvbz1DFpswM5HYTstC3fsS0UE+dqc6l86vRC+avr+u2zI3UQZNu6bvrxMXYu5zs/TB33UseTJWwVV4qZ5vRyubimafohIzJefeptG/19WYdzfx/elbFjejyffsh5ynrv97u73+9vwxHsQ8N6Oeec67quiIdcns9nP5xB6sLeSl9C27bufr+70+nkTqeT+/7+XnR9W9FDEORW5VpDRuq67stWD1sqaSKCJUibkh+x1q3h2P4j+5q+bS3DDUqIB3PTMVHv67HhEUvsH7Hx2r5hZLFhkpL/qqqYJKBgNg6sPTQkZ316P4jNTifnS3oc/hHIUKrYMK4cf/786X/Xda7LV869cobQyjHyCMO4chT1DIJUkO4cTB33bL+vx6PL7/ohM92JSI1vj/E1IDuWreu6HwdFOXEsZby3dHDWOFGx46pl/N8Rx/bJmNM1O1+WHat9dNKetDVnnUitR9q6Ht969AORrRP5PfRs2dxidXK5XN4egrQdek3246qqJh03sDzd5vSJ9VoxMNWO5TmC3Dggyx8thuvtH3tO9PX11f8eKsMjXoCZS1EdBOfer1bnNIihJ1a+K9L6QCAdkykH5pyDhDwkp5eT6fJKuQKl8yP5XHJqR30AHvLQ7V5Je9Odr+/v78VPMErqgK7JV64lHRzkJFSfsBy1nuRB3tLvkMgDofrky9aJfmC05G2Jye3g5F7QkGNHiWWit6+0vDn3vm/ov8WWn2O0RWl0J+5yuUx6l1HoYeOh9EXlEtvO7HLHIq0xBkrG01VV1TVN0zVN01VV5X2QVY9Lk/F3Qr4nacnnqW2Qz0Kf6zF++if0HIGMXdVjBe22Sr51nucs47H1pr8nZegbC9k0zdtnurxDacpn8j1dBjYNXSe2nHPWa9PR9TaGTmcKXdd2W2zatm2M3c7Q53q9er9yavx1zpjtMZaOKV0X3m67PTb+2O+G8h6qP7tv5LS91P5q8y/tfs46GZKfsUJt2leGvv3fFyv1A802vdB69bKhMtTL22V8cVLXzVokD2OeQbBxdupyoRiSY6746pOKA7JO2y7td0N5tsdJWdZ3LAvFcV9eLV/+csfpz22p+GDLKnQeYPdlvQ/auB6L/7bN+tKPpWfzOLc1zr99iuogxBpFzjKys8SWieXf1wAtX2OwadpGm9Owl2pcc3QQQuVsd6rUdoSWD53E+n6apvkxs0lsvWPaQYwvz2PE6l+nHcu/zKIypL2H1isB1daR7wA558F7raAXald6n/T9PfdAbdto7HO9TCifoTIemt5US8d9XxnpDtqQDkIsPd/2hNZpxcogFgP30kHQ34/lOXQSFUtvaLtZIsZoseOLzYMuD73tsU7i0DiQ6iD46iPUxlIP0C9hqfgQO4fyTRqQiomp/T4nzqTiyJIXBrbqIJy6Lm8si35bZOZXBvPNfeu7LRR6OVHolo/vzYM+cqs4tX2pNzk7lz/nes6c3VNMqTcZBpXaDi1n3vzUMrlz7/uGO6XeLTB1iNScwwnGvFU69JZwO19+7G3iunx95Rwq/yXeGJq7z81Ftm1I3cXqKfYOAyun7W35TIrPGnF/bvpdFnO01TmfiVuK7EePx8Ndr9dRaeTGxtw4MCbWrjVca0wcyE13jjZS8hAtbU/xIadu5qq/uW1Wzrk9ia16MGs56vYddbu24lz8yg+GoW3+K3TnZmufHD9yh9SUQPLINKfDLXX3bQz33xXo0uJAyCfHhzVtVc7FTHO6Fd+0VwCwFv2mYHG0Bw73Rl+xE0edcvnTlXLFWNqX3vc5L8GWipvFaG3df7drpjwhDwBj2ZhDDNre7XajHrAqpsdFaT6+gyA4GADYCvEHAFCSjx9iBAAAAOAvOggANqFnAwvNTIZyUEcAfHhW4pjoIAAAkhgGBcCHDsIx0UEAACS1bbt1FgAAK6GDAABIYupVABox4dhGvUm5qqof83Zvqa7rWfIkb8uMrWfs34Z8DgAAAGiZp+yzGNVBAAAAALCeNTsI2e9BqKqKDgIAfKCqqqJvnG3b9u3ua+7yYx98tusTofTmmoFJtiuVns1HSTNAyZ32UoeH2LYTqutSpdp0SW2hdKm2kPr8er26r6+vYPq2Lmx69vO1J2qQ9efGnbll30EAAAAAcHw8pAwAAACgRwcBAAAAQI8OAgAAAIAeHQQAAAAAPToIAAAAAHp0EAAAAAD06CAAAAAA6NFBAAAAAND7P6dtoO9e5UvNAAAAAElFTkSuQmCC"},303:function(v,t,A){"use strict";A.r(t);var n=[function(){var v=this,t=v._self._c;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"压缩列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩列表"}},[v._v("#")]),v._v(" 压缩列表")]),v._v(" "),t("p",[v._v("压缩列表是"),t("strong",[v._v("列表键")]),v._v("和"),t("strong",[v._v("哈希键")]),v._v("底层实现之一。当一个列表键只包含少量列表项，且每个列表项要么是小整数，要么是长度比较短的字符串，Redis就使用压缩列表来做列表键的底层实现。")]),v._v(" "),t("h2",{attrs:{id:"压缩列表的构成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩列表的构成"}},[v._v("#")]),v._v(" "),t("strong",[v._v("压缩列表的构成")])]),v._v(" "),t("p",[v._v("为节约内存而开发的，由一系列"),t("strong",[v._v("特殊编码")]),v._v("的"),t("strong",[v._v("连续内存块")]),v._v("组成的"),t("strong",[v._v("顺序型")]),v._v("数据结构。")]),v._v(" "),t("p",[t("img",{attrs:{src:A(227),alt:"image-20210305144944621"}})]),v._v(" "),t("p",[v._v("压缩列表的数据结构")]),v._v(" "),t("p",[v._v("结构比较简单，属性如下：")]),v._v(" "),t("ul",[t("li",[v._v("zlbytes：记录整个压缩列表占用内存字节数，进行内存重分配或计算zlend时使用。")]),v._v(" "),t("li",[v._v("zltail：记录压缩列表尾节点距离压缩列表起始地址多少字节。")]),v._v(" "),t("li",[v._v("zllen：节点数量。小于65535时，表示节点数量；大于时，需要遍历才能计算得出。")]),v._v(" "),t("li",[v._v("entryx：列表节点。")]),v._v(" "),t("li",[v._v("zlend：特殊值0xFF用于标记压缩列表的末端。")])]),v._v(" "),t("h2",{attrs:{id:"压缩列表节点的组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩列表节点的组成"}},[v._v("#")]),v._v(" "),t("strong",[v._v("压缩列表节点的组成")])]),v._v(" "),t("p",[v._v("每个压缩列表节点可以是一个"),t("strong",[v._v("字节数组")]),v._v("，也可以是一个"),t("strong",[v._v("整数")]),v._v("。由"),t("code",[v._v("previous_entry_length，encoding，content")]),v._v("组成。")]),v._v(" "),t("h3",{attrs:{id:"previous-entry-length"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#previous-entry-length"}},[v._v("#")]),v._v(" "),t("strong",[v._v("previous_entry_length")])]),v._v(" "),t("p",[v._v("单位是字节，记录压缩列表"),t("strong",[v._v("前一个节点的长度")]),v._v("。该属性长度为"),t("strong",[v._v("1字节或5字节")])]),v._v(" "),t("ul",[t("li",[v._v("前一个节点的长度<254字节时，该属性只有1字节。如0x05，表示前一个字节长度为5字节。")]),v._v(" "),t("li",[v._v("前一个节点的长度>=254字节时，该属性有5字节，如0xFE0000，0xFE（254）表示前一节点的长度有五位，后面为前一节点长度，换算为10进制就是10086。")])]),v._v(" "),t("h3",{attrs:{id:"encoding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#encoding"}},[v._v("#")]),v._v(" "),t("strong",[v._v("encoding")])]),v._v(" "),t("p",[v._v("encoding记录了节点的content属性所保存"),t("strong",[v._v("数据类型")]),v._v("和"),t("strong",[v._v("长度")]),v._v("。"),t("strong",[v._v("高两位")]),v._v("表示存储的是字节数组还是整数。00，10，01表示为字节数组，11表示为整数。")]),v._v(" "),t("h3",{attrs:{id:"content"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#content"}},[v._v("#")]),v._v(" "),t("strong",[v._v("content")])]),v._v(" "),t("p",[v._v("存储节点的值。")]),v._v(" "),t("h2",{attrs:{id:"连锁更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连锁更新"}},[v._v("#")]),v._v(" "),t("strong",[v._v("连锁更新")])]),v._v(" "),t("p",[v._v("当多个连续的长度介于250字节到253字节之间的节点，插入新的头节点（长度大于等于245字节），后面节点的previous_entry_length就要新增4字节的空间（1字节变成5字节），需要进行内存重分配，由于前一个节点的变更，每个节点的previous_entry_length属性也需要记录之前的长度而发生相应的变更，所以会出现连锁更新。除了新增节点，删除节点也可能会遇到这种情况。")])])}],e=A(0),s=Object(e.a)({},(function(){this._self._c;return this._m(0)}),n,!1,null,null,null);t.default=s.exports}}]);