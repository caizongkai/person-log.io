(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{364:function(s,n,a){"use strict";a.r(n);var t=a(0),e=Object(t.a)({},(function(){this._self._c;return this._m(0)}),[function(){var s=this,n=s._self._c;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"docker部署vue项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker部署vue项目"}},[s._v("#")]),s._v(" Docker部署Vue项目")]),s._v(" "),n("h3",{attrs:{id:"_1、将项目打包，然后将dist文件夹传到服务器上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、将项目打包，然后将dist文件夹传到服务器上"}},[s._v("#")]),s._v(" 1、将项目打包，然后将dist文件夹传到服务器上")]),s._v(" "),n("h3",{attrs:{id:"_2、获取-nginx-镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、获取-nginx-镜像"}},[s._v("#")]),s._v(" 2、获取 nginx 镜像")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3、创建-nginx-config配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、创建-nginx-config配置文件"}},[s._v("#")]),s._v(" 3、创建 nginx config配置文件")]),s._v(" "),n("p",[s._v("在项目根目录下创建"),n("code",[s._v("nginx")]),s._v("文件夹，该文件夹下新建文件"),n("code",[s._v("default.conf")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n    access_log  /var/log/nginx/host.access.log  main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    error_log  /var/log/nginx/error.log  error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index  index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page  404              /404.html;")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redirect server error pages to the static page /50x.html")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    error_page   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("该配置文件定义了首页的指向为 "),n("code",[s._v("/usr/share/nginx/html/index.html")]),s._v(", 所以我们可以一会把构建出来的index.html文件和相关的静态资源放到"),n("code",[s._v("/usr/share/nginx/html")]),s._v("目录下。")]),s._v(" "),n("h3",{attrs:{id:"_4、项目根目录下创建dockerfile文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、项目根目录下创建dockerfile文件"}},[s._v("#")]),s._v(" 4、项目根目录下创建Dockerfile文件")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("FROM nginx\nCOPY dist/ /usr/share/nginx/html/\nCOPY nginx/default.conf /etc/nginx/conf.d/default.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("自定义构建镜像的时候基于Dockerfile来构建。")]),s._v(" "),n("p",[n("code",[s._v("FROM nginx")]),s._v(" 命令的意思该镜像是基于 nginx:latest 镜像而构建的。")]),s._v(" "),n("p",[n("code",[s._v("COPY dist/ /usr/share/nginx/html/")]),s._v(" 命令的意思是将项目根目录下dist文件夹下的所有文件复制到镜像中 /usr/share/nginx/html/ 目录下。")]),s._v(" "),n("p",[n("code",[s._v("COPY nginx/default.conf /etc/nginx/conf.d/default.conf")]),s._v(" 命令的意思是将nginx目录下的default.conf 复制到 etc/nginx/conf.d/default.conf，用本地的 default.conf 配置来替换nginx镜像里的默认配置。")])]),s._v(" "),n("p",[s._v("5、基于该Dockerfile构建vue应用镜像")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" vuenginxcontainer "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("-t")]),s._v(" 是给镜像命名 "),n("code",[s._v(".")]),s._v(" 是基于当前目录的Dockerfile来构建镜像")])]),s._v(" "),n("p",[s._v("6、启动容器")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" vueApp vuenginxcontainer\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("ul",[n("li",[n("code",[s._v("docker run")]),s._v(" 基于镜像启动一个容器")]),s._v(" "),n("li",[n("code",[s._v("-p 8000:80")]),s._v(" 端口映射，将宿主的8000端口映射到容器的80端口")]),s._v(" "),n("li",[n("code",[s._v("-d")]),s._v(" 后台方式运行")]),s._v(" "),n("li",[n("code",[s._v("--name")]),s._v(" 容器名 查看 docker 进程")])])])])}],!1,null,null,null);n.default=e.exports}}]);